(function(a){a.fn.borderWidth=function(){return parseInt(a(this).css("borderLeftWidth"),10)};a.fn.windowed=function(d){var b={},e={_init:function(h){return this.each(function(){b=a.extend(!0,{},a.fn.windowed.defaults,h);var c=a(this).prop("type"),g={},j,d=!0===b.theme?a(this).attr("class"):b.theme,f=a(this).wrap(a("<div />",{"class":"windowed",height:b.height})).parent().addClass(c).addClass(d),d=a(this).find("option"),g=parseInt(f.css("borderTopLeftRadius"),10),l=a('<div class="slider" />').hide().appendTo(f), i=l.borderWidth();l.remove();b=a.extend({width:f.width(),height:f.height(),disabled:a(this).attr("disabled")},b);!1===b.animate&&(b.animateDuration=0);void 0===a(this).attr("id")&&a(this).attr("id","wp_"+Math.floor(1E16*Math.random()));b.width/=2;g={slider:{css:{borderWidth:i},width:b.width-2*i,height:b.height-2*i},checkstate:{width:b.width,height:b.height,css:{lineHeight:b.height+"px"},on:{css:{borderRadius:g+"px 0px 0px "+g+"px"},text:b.on},off:{css:{borderRadius:"0px "+g+"px "+g+"px 0px"},text:b.off}}, li:{height:b.height,css:{lineHeight:b.height+"px"}}};a.extend(!0,b,g);a.each(["on","off"],function(){a.extend(!0,b.checkstate[this],b.checkstate)});"checkbox"===c?(f.width(2*b.width),a("<label />",{"for":a(this).attr("id")}).appendTo(f).on("click",function(){}),a.each([b.checkstate.on,b.checkstate.off,b.slider],function(b,c){f.append(a("<div />",c))}),e._checkboxChange.apply(a(this),[{data:{duration:0}}])):"select-one"===c&&(j=a("<ul />").appendTo(f),b.vertical&&f.addClass("vertical"),a.each(d,function(c, h){j.append(a("<li />",a.extend({text:h.text,"class":a(h).is(":selected")?"selected":void 0},b.li)))}),f.append(a("<div />",b.slider)),e._selectChange.apply(f.find("li.selected"),[{data:{duration:0}}]));a(this).on("windowed.change",b.change);e[b.disabled?"_disable":"_enable"].apply(a(this))})},_checkboxChange:function(b){var c=a(this).prop("checked"),g=a(this).siblings(".slider"),d=a(this).siblings(".checkstate").removeClass("selected").filter(c?".on":".off").addClass("selected"),d={left:c?0:d.width()}; g.animate(d,b.data.duration,a.proxy(function(){a(this).trigger("windowed.change",c,b)},this))},_selectChange:function(b){a(this).addClass("selected").siblings("li").removeClass("selected");var c=a(this).closest("div"),d=c.find(".slider"),e=c.find("select"),c=c.hasClass("vertical"),k=d.borderWidth(),c={width:a(this).outerWidth()-(c?k:2*k),left:c?0:a(this).position().left,top:a(this).position().top-1};d.animate(c,b.data.duration,a.proxy(function(){e[0].selectedIndex=a(this).index();e.trigger("windowed.change", e.find("option:selected")[0],b).trigger("change")},this))},_enable:function(){var d=a(this).prop("type"),c={duration:b.animateDuration};a(this).prop("disabled",!1).parent().removeClass("disabled");if("checkbox"===d)a(this).on("change",c,e._checkboxChange);else if("select-one"===d)a(this).parent().find("li").on("click",c,e._selectChange)},_disable:function(){a(this).attr("disabled",!0).off("change").parent().addClass("disabled").find("li").off("click")},setEnabled:function(b){e[b?"_enable":"_disable"].apply(a(this)); return b},toggleEnabled:function(){return e.setEnabled.apply(a(this),[a(this).prop("disabled")])},setState:function(b){a(this).prop("checked",b).trigger("change");return b},toggleState:function(){return e.setState.apply(a(this),[!a(this).prop("checked")])},selectOption:function(b){return a(this).parent().find("li").eq(b).trigger("click")[0]}};if(d&&e[d]&&"_"!==d.charAt(0))return e[d].apply(this,[].slice.call(arguments,1));if("object"===typeof d||!d)return e._init.apply(this,[].slice.call(arguments, 0));a.error("Method "+d+" does not exist on jQuery.windowed");return this};a.fn.windowed.defaults={animate:!0,animateDuration:400,change:function(){},css:{},checkstate:{on:{"class":"checkstate on",text:"ON"},off:{"class":"checkstate off",text:"OFF"}},slider:{"class":"slider"}}})(jQuery);